(this.webpackJsonpnetwork=this.webpackJsonpnetwork||[]).push([[0],{109:function(e,t,n){e.exports={profile:"Profile_profile__2LSn5"}},127:function(e,t,n){e.exports={img:"ProfileInfo_img__2lCOw",image:"ProfileInfo_image__2Jz3F",profile__wrapper:"ProfileInfo_profile__wrapper__F4K3S"}},128:function(e,t,n){e.exports={post:"Post_post__3wUTQ",wrap:"Post_wrap__bSfXB",img:"Post_img__2LJI8"}},144:function(e,t,n){e.exports={main:"Preloader_main__1a-af",img:"Preloader_img__2tHPs"}},145:function(e,t,n){e.exports={posts:"MyPosts_posts__TOD2P",main:"MyPosts_main__2ptLK"}},150:function(e,t,n){},151:function(e,t,n){},157:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var r=n(36),a=n(6),s=function(e){return{type:"SEND-MESSAGE",newMessageBody:e}},c={dialogs:[{id:1,name:"Ivan"},{id:2,name:"Oleg"},{id:3,name:"Misha"},{id:4,name:"Petr"},{id:5,name:"Alex"}],messages:[{id:1,message:"Privet"},{id:2,message:"How are you"},{id:3,message:"Lets we meet"},{id:4,message:"No"}]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var n=Object(a.a)(Object(a.a)({},e),{},{messages:Object(r.a)(e.messages)}),s=t.newMessageBody;return n.messages.push({id:5,message:s}),n;default:return e}}},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(6),a=n(105),s=(n(0),n(81)),c=n.n(s),i=n(1),o=function(e){var t=e.input,n=e.meta,s=Object(a.a)(e,["input","meta"]);return Object(i.jsxs)("div",{className:"".concat(c.a.formControl," ").concat(n.touched&&n.error?c.a.error:""),children:[Object(i.jsx)("div",{children:Object(i.jsx)("textarea",Object(r.a)(Object(r.a)({},t),s))}),n.touched&&n.error&&Object(i.jsx)("span",{children:n.error})]})}},219:function(e,t,n){},301:function(e,t,n){},348:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=(n(219),n(16)),c=n(157),i=n(14),o=n.n(i),u=n(25),l=n(36),j=n(6),d=n(189),b=n.n(d).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"7c38f700-eae7-4224-81a9-9392ebf67fbb"}}),f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+(null===r?"":"&friend=".concat(r))).then((function(e){return e.data}))},p=function(e){return b.post("follow/".concat(e))},O=function(e){return b.delete("follow/".concat(e))},h=function(e){return m.getProfile(e)},m={getProfile:function(e){return b.get("profile/"+e)},getStatus:function(e){return b.get("profile/status/"+e)},updateStatus:function(e){return b.put("profile/status/",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),b.put("profile/photo/",t,{headers:{"Content-Type":"multipart/form-data"}})}},x=function(){return b.get("auth/me")},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return b.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},v=function(){return b.delete("auth/login")},S=function(){return b.get("security/get-captcha-url")},P={posts:[{id:1,message:"Hello",likesCount:8},{id:2,message:"How are you?",likesCount:15},{id:3,message:"Where are you?",likesCount:50}],profile:null,status:""},w=function(e){return{type:"PROFILE/SET-STATUS",status:e}},E={friends:[{name:"Ivan"},{name:"Oleg"},{name:"Petr"},{name:"Vasa"},{name:"Sergei"},{name:"Margo"}]},_={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingProgress:[],filter:{term:"",friend:null}},y=function(e){return{type:"USERS/FOLLOW",userID:e}},U=function(e){return{type:"USERS/UNFOLLOW",userID:e}},R=function(e){return{type:"USERS/SET-FILTER",payload:e}},N=function(e){return{type:"USERS/SET-CURRENT-PAGE",currentPage:e}},T=function(e){return{type:"USERS/SET-PRELOADER",isFetching:e}},C=function(e,t){return{type:"USERS/FOLLOWING-IN-PROGRESS",userID:e,isFetching:t}},L=function(e,t,n){return function(){var r=Object(u.a)(o.a.mark((function r(a){var s;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(T(!0)),a(N(e)),a(R(n)),r.next=5,f(e,t,n.term,n.friend);case 5:s=r.sent,a(T(!1)),a({type:"USERS/SET-USERS",users:s.items}),a({type:"USERS/SET-CURRENT-TOTAL-COUNT",totalCount:s.totalCount});case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},I={id:2,email:null,login:null,isAuth:!1,captchaURL:null},k=function(e,t,n,r){return{type:"AUTH/SET-USER-DATA",payload:{id:e,email:t,login:n,isAuth:r}}},F=function(e){return{type:"AUTH/SET-CAPTCHA-URL",payload:{captchaURL:e}}},A=function(){return function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,a=r.id,s=r.email,c=r.login,t(k(a,s,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(){return function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:n=e.sent,r=n.data.url,t(F(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}}),e,null,[[0,8,11,13]])})));return function(t){return e.apply(this,arguments)}}()},M=n(190),H=n(358),z={initialized:!1},G={messages:[]},V=Object(s.c)({dialogsPage:c.b,profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE/SET-STATUS":return Object(j.a)(Object(j.a)({},e),{},{status:t.status});case"PROFILE/ADD-POST":return Object(j.a)(Object(j.a)({},e),{},{posts:[{id:5,message:t.newPostText,likesCount:0}].concat(Object(l.a)(e.posts))});case"PROFILE/SET-USER-PROFILE":return Object(j.a)(Object(j.a)({},e),{},{profile:t.profile});case"PROFILE/DELETE-POST":return Object(j.a)(Object(j.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!=t.id}))});case"PROFILE/SET-PHOTO":return Object(j.a)(Object(j.a)({},e),{},{profile:e.profile?Object(j.a)({},e.profile):null});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return e},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS/FOLLOW":return Object(j.a)(Object(j.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(j.a)(Object(j.a)({},e),{},{followed:!0}):e}))});case"USERS/UNFOLLOW":return Object(j.a)(Object(j.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(j.a)(Object(j.a)({},e),{},{followed:!1}):e}))});case"USERS/SET-USERS":return Object(j.a)(Object(j.a)({},e),{},{users:t.users});case"USERS/SET-CURRENT-PAGE":return Object(j.a)(Object(j.a)({},e),{},{currentPage:t.currentPage});case"USERS/SET-CURRENT-TOTAL-COUNT":return Object(j.a)(Object(j.a)({},e),{},{totalUsersCount:t.totalCount});case"USERS/SET-PRELOADER":return Object(j.a)(Object(j.a)({},e),{},{isFetching:t.isFetching});case"USERS/FOLLOWING-IN-PROGRESS":return Object(j.a)(Object(j.a)({},e),{},{followingProgress:t.isFetching?[].concat(Object(l.a)(e.followingProgress),[t.userID]):e.followingProgress.filter((function(e){return e!==t.userID}))});case"USERS/SET-FILTER":return Object(j.a)(Object(j.a)({},e),{},{filter:t.payload});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH/SET-USER-DATA":case"AUTH/SET-CAPTCHA-URL":return Object(j.a)(Object(j.a)({},e),t.payload);default:return e}},form:H.a,appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED-SUCCESSES":return Object(j.a)(Object(j.a)({},e),{},{initialized:!0});default:return e}},chatReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGES-RECEIVED":return Object(j.a)(Object(j.a)({},e),{},{messages:[].concat(Object(l.a)(e.messages),Object(l.a)(t.payload.messages))});default:return e}}}),W=window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,B=Object(s.e)(V,W(Object(s.a)(M.a)));window.store=B;var K=n(31),J=n.n(K),X=n(107),Y=n(108),Z=n(126),q=n(124),Q=(n(301),n(302),n(11)),$=n.p+"static/media/3.b98a8c76.svg",ee=n(144),te=n.n(ee),ne=n(1),re=function(){return Object(ne.jsx)("div",{className:te.a.main,children:Object(ne.jsx)("img",{className:te.a.img,alt:"preloader",src:$})})},ae=n(22),se=n(18),ce=n(351),ie=n(350),oe=n(360),ue=n(361),le=n(109),je=n.n(le),de=n(127),be=n.n(de),fe=n.p+"static/media/mountain.ed14195c.jpg",pe=n(53),Oe=function(e){var t=Object(r.useState)(!1),n=Object(pe.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(e.status),i=Object(pe.a)(c,2),o=i[0],u=i[1];Object(r.useEffect)((function(){u(e.status)}),[e.status]);var l=function(){s(!1),e.updateStatus(o)};return Object(ne.jsx)("div",{children:a?Object(ne.jsx)("div",{children:Object(ne.jsx)("input",{onKeyPress:function(e){13===e.charCode&&l()},onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:l,value:o})}):Object(ne.jsx)("div",{children:Object(ne.jsx)("span",{onDoubleClick:function(){s(!0)},children:e.status})})})},he=n.p+"static/media/img.61f53e90.png",me=function(e){if(!e.profile)return Object(ne.jsx)(re,{});return Object(ne.jsxs)("div",{children:[Object(ne.jsx)("img",{className:be.a.img,src:fe,alt:""}),Object(ne.jsxs)("div",{className:be.a.profile__wrapper,children:[Object(ne.jsx)("h2",{children:"Name and Description"}),Object(ne.jsx)(Oe,{status:e.status,updateStatus:e.updateStatus}),Object(ne.jsx)("img",{alt:"some pic",className:be.a.image,src:e.profile.photos.large||he}),e.isOwner&&Object(ne.jsx)("input",{type:"file",onChange:function(t){t.target.files&&t.target.files.length&&e.savePhoto(t.target.files[0])}}),Object(ne.jsxs)("div",{children:[Object(ne.jsxs)("b",{children:["About me: ",e.profile.aboutMe]})," "]}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)("b",{children:"Looking for a job:"})," ",e.profile.lookingForAJob?"No":"Yes"]}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)("b",{children:" My real name is"}),"  ",e.profile.fullName[0].toUpperCase()+e.profile.fullName.slice(1)]})]})]})},xe=n(145),ge=n.n(xe),ve=n(128),Se=n.n(ve),Pe=n.p+"static/media/bird.5ea64365.jpg",we=function(e){return Object(ne.jsxs)("div",{className:Se.a.post,children:[Object(ne.jsx)("img",{className:Se.a.img,src:Pe,alt:""}),Object(ne.jsxs)("div",{className:Se.a.wrap,children:[Object(ne.jsxs)("div",{children:[e.message," "]}),Object(ne.jsxs)("div",{children:["Likes ",e.likes]})]})]})},Ee=n(354),_e=n(352),ye=n(66),Ue=n(177),Re=Object(ye.a)(15),Ne=a.a.memo((function(e){return Object(ne.jsxs)("div",{className:ge.a.posts,children:[Object(ne.jsxs)("div",{className:ge.a.main,children:[Object(ne.jsx)("h2",{children:"My Posts"}),Object(ne.jsx)(Te,{onSubmit:function(t){t&&e.addPost(t.newPostText)}})]}),e.posts.map((function(e,t){return Object(ne.jsx)(we,{message:e.message,likes:e.likesCount},t)}))]})})),Te=Object(_e.a)({form:"ProfileAddNewPost"})((function(e){return Object(ne.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(ne.jsx)("div",{children:Object(ne.jsx)(Ee.a,{name:"newPostText",component:Ue.a,validate:[ye.b,Re],placeholder:"Post message"})}),Object(ne.jsx)("button",{children:"Add post"})]})})),Ce=Object(Q.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(function(e){return{type:"PROFILE/ADD-POST",newPostText:e}}(t))}}}))(Ne),Le=function(e){return Object(ne.jsxs)("div",{className:je.a.profile,children:[Object(ne.jsx)(me,{savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(ne.jsx)(Ce,{})]})},Ie=function(e){Object(Z.a)(n,e);var t=Object(q.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object(Y.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e="19115")||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(ne.jsxs)("div",{className:je.a.profile,children:[Object(ne.jsx)(Le,Object(j.a)(Object(j.a)({},this.props),{},{profile:this.props.profile,isOwner:!this.props.match.params.userId,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))," "]})}}]),n}(a.a.Component),ke=Object(s.d)(Object(Q.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status}}),{getUserProfile:function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:r=t.sent,n({type:"PROFILE/SET-USER-PROFILE",profile:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getStatus:function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.getStatus(e);case 2:r=t.sent,n(w(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(w(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.savePhoto(e);case 2:0===(r=t.sent).data.resultCode&&n({type:"PROFILE/SET-PHOTO",photos:r.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),se.h)(Ie),Fe=n(105),Ae=n(81),De=n.n(Ae),Me=function(e){var t=e.input,n=e.meta,r=Object(Fe.a)(e,["input","meta"]);return Object(ne.jsxs)("div",{className:"".concat(De.a.formControl," ").concat(n.touched&&n.error?De.a.error:""),children:[Object(ne.jsx)("div",{children:Object(ne.jsx)("input",Object(j.a)(Object(j.a)({},t),r))}),n.touched&&n.error&&Object(ne.jsx)("span",{children:n.error})]})},He=Object(_e.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.initialValues;return Object(ne.jsxs)("form",{onSubmit:t,children:[Object(ne.jsx)("div",{children:Object(ne.jsx)(Ee.a,{placeholder:"Login",name:"email",validate:[ye.b],component:Me})}),Object(ne.jsx)("div",{children:Object(ne.jsx)(Ee.a,{placeholder:"Password",validate:[ye.b],type:"password",name:"password",component:Me})}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)(Ee.a,{component:Me,name:"rememberMe",type:"checkbox"}),"Remember Me"]}),n.captchaURL&&Object(ne.jsx)("img",{alt:"capture",src:n.captchaURL}),n.captchaURL&&Object(ne.jsx)(Ee.a,{placeholder:"Type text from captcha",component:Me,validate:[ye.b],name:"captcha",type:"input"}),Object(ne.jsx)("div",{children:Object(ne.jsx)("button",{children:"Login"})})]})})),ze=function(){var e=Object(Q.d)((function(e){return e.auth.captchaURL})),t=Object(Q.d)((function(e){return e.auth.isAuth})),n=Object(Q.c)();return t?Object(ne.jsx)(se.a,{to:"/profile"}):Object(ne.jsxs)("div",{children:[Object(ne.jsx)("h1",{children:"Login"}),Object(ne.jsx)(He,{onSubmit:function(e){var t,r,a,s;n((t=e.email,r=e.password,a=e.rememberMe,s=e.captcha,function(){var e=Object(u.a)(o.a.mark((function e(n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,r,a,s);case 2:0===(c=e.sent).data.resultCode&&n(A()),10===c.data.resultCode&&n(D());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},initialValues:{captchaURL:e}})]})},Ge=n(150),Ve=n.n(Ge),We=a.a.memo((function(){return Object(ne.jsxs)("div",{children:[Object(ne.jsx)("h2",{className:Ve.a.title,children:"News"}),Object(ne.jsx)("div",{className:Ve.a.body})]})})),Be=n(151),Ke=n.n(Be),Je=a.a.memo((function(){return Object(ne.jsxs)("div",{children:[Object(ne.jsx)("h2",{className:Ke.a.title,children:"Music"}),Object(ne.jsx)("div",{className:Ke.a.body})]})})),Xe=n(38),Ye=n.n(Xe),Ze=n.p+"static/media/neand.5e875fa6.png",qe=function(e){for(var t=e.totalUsersCount,n=e.pageSize,a=e.currentPage,s=e.OnPageHandler,c=e.portionSize,i=void 0===c?10:c,o=Math.ceil(t/n),u=[],l=1;l<=o;l++)u.push(l);var j=Math.ceil(o/i),d=Object(r.useState)(1),b=Object(pe.a)(d,2),f=b[0],p=b[1],O=(f-1)*i+1,h=f*i;return Object(ne.jsx)("div",{className:Ye.a.main,children:Object(ne.jsxs)("div",{className:Ye.a.pagination_wrapper,children:[f>1&&Object(ne.jsx)("button",{onClick:function(){p(f-1)},children:"PREV"}),u.filter((function(e){return e>=O&&e<=h})).map((function(e){return Object(ne.jsx)("span",{className:a===e?Ye.a.selectedPage:"",onClick:function(){s(e)},children:e},e)})),j>f&&Object(ne.jsx)("button",{onClick:function(){p(f+1)},children:"NEXT"})]})})},Qe=n(93),$e=a.a.memo((function(e){var t=Object(Q.d)((function(e){return e.usersPage.filter}));return Object(ne.jsx)("div",{children:Object(ne.jsx)(Qe.c,{enableReinitialize:!0,initialValues:{term:t.term,friend:String(t.friend)},validate:function(e){return{}},onSubmit:function(t,n){var r=n.setSubmitting,a={term:t.term,friend:"null"===t.friend?null:"true"===t.friend};e.OnFilterHandler(a),r(!1)},children:function(e){var t=e.isSubmitting;return Object(ne.jsxs)(Qe.b,{children:[Object(ne.jsx)(Qe.a,{type:"text",name:"term"})," ",Object(ne.jsxs)(Qe.a,{name:"friend",as:"select",children:[Object(ne.jsx)("option",{value:"null",children:"All"}),Object(ne.jsx)("option",{value:"true",children:"Only Followed"}),Object(ne.jsx)("option",{value:"false",children:"UnFollowed"})]}),Object(ne.jsx)("button",{type:"submit",disabled:t,children:"Find"})]})}})})})),et=n(213),tt=(Object(et.a)((function(e){return e.usersPage.users}),(function(e){return e.map((function(e){return e}))})),function(e){return e.usersPage.pageSize}),nt=function(e){return e.usersPage.currentPage},rt=n(194),at=function(){var e=Object(Q.c)(),t=Object(se.g)(),n=Object(Q.d)((function(e){return e.usersPage.totalUsersCount})),a=Object(Q.d)(nt),s=Object(Q.d)(tt),c=Object(Q.d)((function(e){return e.usersPage.filter})),i=Object(Q.d)((function(e){return e.usersPage.users})),l=Object(Q.d)((function(e){return e.usersPage.followingProgress}));Object(r.useEffect)((function(){var n=t.location.search,r=rt.parse(n.substr(1)),i=a,o=c;r.page&&(i=+r.page),r.term&&(o=Object(j.a)(Object(j.a)({},o),{},{term:r.term})),r.friend&&(o=Object(j.a)(Object(j.a)({},o),{},{friend:"null"===r.friend?null:"true"===r.friend})),e(L(i,s,o))}),[]),Object(r.useEffect)((function(){t.push({pathname:"/users",search:"?term=".concat(c.term,"&friend=").concat(c.friend,"&page=").concat(a)})}),[c,a]);var d=function(t){e(function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(C(e,!0)),t.next=3,p(e);case 3:0===t.sent.data.resultCode&&n(y(e)),n(C(e,!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},b=function(t){e(function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(C(e,!0)),t.next=3,O(e);case 3:0===t.sent.data.resultCode&&n(U(e)),n(C(e,!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))};return Object(ne.jsxs)("div",{className:Ye.a.main,children:[Object(ne.jsx)($e,{OnFilterHandler:function(t){e(L(1,s,t))}}),Object(ne.jsx)(qe,{currentPage:a,OnPageHandler:function(t){e(L(t,s,c))},totalUsersCount:n,pageSize:s,portionSize:10}),i.map((function(e){return Object(ne.jsx)("div",{className:Ye.a.item,children:Object(ne.jsxs)("span",{children:[Object(ne.jsx)("div",{children:Object(ne.jsx)(ae.b,{to:"/profile/"+e.id,children:Object(ne.jsx)("img",{className:Ye.a.image,src:null!==e.photos.small?e.photos.small:Ze,alt:""})})}),Object(ne.jsxs)("div",{className:Ye.a.follow,children:[" ",e.followed?Object(ne.jsx)("button",{disabled:l.some((function(t){return t===e.id})),onClick:function(){b(e.id)},children:"Unfollow"}):Object(ne.jsx)("button",{disabled:l.some((function(t){return t===e.id})),onClick:function(){d(e.id)},children:"Follow"})]}),Object(ne.jsx)("span",{children:Object(ne.jsxs)("div",{className:Ye.a.wrap,children:[Object(ne.jsx)("span",{className:Ye.a.desc,children:"Name"})," ",Object(ne.jsx)("div",{className:Ye.a.name,children:e.name})]})})]})},e.id)}))]})},st=a.a.memo((function(){var e=Object(Q.d)((function(e){return e.usersPage.isFetching}));return Object(ne.jsxs)(ne.Fragment,{children:[e?Object(ne.jsx)(re,{}):null,Object(ne.jsx)(at,{})]})})),ct=n(357),it=n(359),ot=n(356),ut=n(355),lt=function(){var e=Object(Q.d)((function(e){return e.auth.isAuth})),t=Object(Q.d)((function(e){return e.auth.login})),n=Object(Q.c)(),r=ie.a.Header;return Object(ne.jsxs)(r,{className:"header",children:[Object(ne.jsx)("div",{className:"logo"}),Object(ne.jsxs)(ct.a,{children:[Object(ne.jsx)(it.a,{span:18,children:Object(ne.jsx)(ce.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],children:Object(ne.jsx)(ce.a.Item,{children:Object(ne.jsx)(ae.b,{to:"/users",children:"Users"})},"1")})}),e?Object(ne.jsxs)(ne.Fragment,{children:[" ",Object(ne.jsx)(it.a,{span:1,children:Object(ne.jsx)(ot.a,{alt:t||"",style:{backgroundColor:"#87d068"},icon:Object(ne.jsx)(oe.a,{})})}),Object(ne.jsx)(it.a,{span:5,children:Object(ne.jsx)(ut.a,{onClick:function(){n((function(e){v().then((function(t){0===t.data.resultCode&&e(k(null,null,null,!1))}))}))},children:"Log out"})})]}):Object(ne.jsx)(it.a,{span:6,children:Object(ne.jsx)(ut.a,{children:Object(ne.jsx)(ae.b,{to:"/login",children:"Login"})})})]})]})},jt=n(70),dt=n.n(jt),bt=a.a.memo((function(e){var t=e.messageData,n=t.message,r=t.photo,a=(t.userId,t.userName);return Object(ne.jsxs)("div",{className:dt.a.wrapper,children:[Object(ne.jsxs)("div",{className:dt.a.info,children:[Object(ne.jsx)("img",{className:dt.a.image,src:r,alt:"ava"}),Object(ne.jsx)("div",{className:dt.a.author,children:a})]}),Object(ne.jsx)("div",{className:dt.a.block,children:Object(ne.jsx)("div",{className:dt.a.message,children:n})})]})})),ft=a.a.memo((function(){return Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsx)(pt,{})})})),pt=a.a.memo((function(){var e=Object(r.useState)(null),t=Object(pe.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e,t=function(){setTimeout(n,3e3)},n=function(){e&&(e.removeEventListener("close",t),e.close()),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",t),a(e)};return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(Ot,{ws:n}),Object(ne.jsx)(ht,{ws:n})]})})),Ot=a.a.memo((function(e){var t=e.ws,n=Object(r.useState)([]),a=Object(pe.a)(n,2),s=a[0],c=a[1];return Object(r.useEffect)((function(){var e=function(e){c((function(t){return[].concat(Object(l.a)(t),Object(l.a)(JSON.parse(e.data)))}))};return t&&t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),Object(ne.jsx)("div",{style:{height:"500px",overflowY:"auto"},children:s.map((function(e,t){return Object(ne.jsx)(bt,{messageData:e},t)}))})})),ht=a.a.memo((function(e){var t=e.ws,n=Object(r.useState)(""),a=Object(pe.a)(n,2),s=a[0],c=a[1],i=Object(r.useState)("pending"),o=Object(pe.a)(i,2),u=o[0],l=o[1];Object(r.useEffect)((function(){var e=function(){l("ready")};return t&&t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]);return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("div",{children:Object(ne.jsx)("textarea",{onChange:function(e){return c(e.currentTarget.value)},value:s})}),Object(ne.jsx)("button",{disabled:null===t||"ready"!==u,onClick:function(){s&&(t&&t.send(s),c(""))},children:"Send"})]})})),mt=ce.a.SubMenu,xt=ie.a.Content,gt=ie.a.Footer,vt=ie.a.Sider,St=a.a.lazy((function(){return n.e(3).then(n.bind(null,366))})),Pt=function(e){Object(Z.a)(n,e);var t=Object(q.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object(Y.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(ne.jsxs)(ie.a,{className:"App",children:[Object(ne.jsx)(lt,{}),Object(ne.jsx)(xt,{style:{padding:"0 50px"},children:Object(ne.jsxs)(ie.a,{className:"site-layout-background",style:{padding:"24px 0"},children:[Object(ne.jsx)(vt,{className:"site-layout-background",width:200,children:Object(ne.jsxs)(ce.a,{mode:"inline",defaultOpenKeys:["sub1"],style:{height:"100%"},children:[Object(ne.jsxs)(mt,{icon:Object(ne.jsx)(oe.a,{}),title:"My Profile",children:[Object(ne.jsx)(ce.a.Item,{children:Object(ne.jsx)(ae.b,{to:"/profile",children:"Profile"})},"1"),Object(ne.jsx)(ce.a.Item,{children:Object(ne.jsx)(ae.b,{to:"/dialogs",children:"Dialogs"})},"2"),Object(ne.jsx)(ce.a.Item,{children:Object(ne.jsx)(ae.b,{to:"/news",children:"News"})},"3"),Object(ne.jsx)(ce.a.Item,{children:Object(ne.jsx)(ae.b,{to:"/music",children:"Music"})},"4")]},"sub1"),Object(ne.jsx)(mt,{icon:Object(ne.jsx)(ue.a,{}),title:"Users",children:Object(ne.jsx)(ce.a.Item,{children:Object(ne.jsx)(ae.b,{to:"/users",children:"Users"})},"5")},"sub2"),Object(ne.jsx)(mt,{icon:Object(ne.jsx)(ue.a,{}),title:"ChatPage",children:Object(ne.jsx)(ce.a.Item,{children:Object(ne.jsx)(ae.b,{to:"/chat",children:"ChatPage"})},"6")},"sub3")]})}),Object(ne.jsx)(xt,{style:{padding:"0 24px",minHeight:280},children:Object(ne.jsxs)(se.d,{children:[Object(ne.jsx)(se.b,{exact:!0,path:"/",render:function(){return Object(ne.jsx)(se.a,{to:"/profile"})}}),Object(ne.jsx)(se.b,{path:"/dialogs",render:function(){return Object(ne.jsx)(r.Suspense,{fallback:Object(ne.jsx)("div",{children:"Loading..."}),children:Object(ne.jsx)(St,{})})}}),Object(ne.jsx)(se.b,{path:"/profile/:userId?",render:function(){return Object(ne.jsx)(ke,{})}}),Object(ne.jsx)(se.b,{path:"/users",render:function(){return Object(ne.jsx)(st,{})}}),Object(ne.jsx)(se.b,{path:"/login",render:function(){return Object(ne.jsx)(ze,{})}}),Object(ne.jsx)(se.b,{path:"/news",render:function(){return Object(ne.jsx)(We,{})}}),Object(ne.jsx)(se.b,{path:"/music",render:function(){return Object(ne.jsx)(Je,{})}}),Object(ne.jsx)(se.b,{path:"/chat",render:function(){return Object(ne.jsx)(ft,{})}}),Object(ne.jsx)(se.b,{path:"*",render:function(){return Object(ne.jsx)("div",{children:"Page not found"})}})]})})]})}),Object(ne.jsx)(gt,{style:{textAlign:"center"},children:"Pacavaca Design"})]}):Object(ne.jsx)(re,{})}}]),n}(a.a.Component),wt=Object(s.d)(se.h,Object(Q.b)((function(e){return{initialized:e.appReducer.initialized}}),{initializeApp:function(){return function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(A());case 2:t({type:"INITIALIZED-SUCCESSES"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(Pt),Et=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,365)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};J.a.render(Object(ne.jsx)(ae.a,{children:Object(ne.jsx)(Q.a,{store:B,children:Object(ne.jsx)(wt,{})})}),document.getElementById("root")),Et()},38:function(e,t,n){e.exports={main:"Users_main__pqh2t",image:"Users_image__10RV9",pagination_wrapper:"Users_pagination_wrapper__2wLc9",selectedPage:"Users_selectedPage__ohqD6",desc:"Users_desc__3xwRZ",name:"Users_name__2HBzu",wrap:"Users_wrap__KN6ow",follow:"Users_follow__2ZzmM",item:"Users_item__3-SSA"}},66:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){return e?void 0:"Field is required"},a=function(e){return function(t){return t&&t.length>e?"Max length is ".concat(e," symbols"):void 0}}},70:function(e,t,n){e.exports={image:"Message_image__nf1Sl",wrapper:"Message_wrapper__2jrxo",message:"Message_message__1Vebs",author:"Message_author__3G6Yj",info:"Message_info__17MWL"}},81:function(e,t,n){e.exports={formControl:"Textarea_formControl__50Apl",error:"Textarea_error__2O4Pd"}}},[[348,1,2]]]);
//# sourceMappingURL=main.a12ba5c6.chunk.js.map